<%- include('../partials/header') %>

<h2>Bookings for <%= vehicle.vehicleName %> </h2>
<p><strong>Route:</strong> <%= vehicle.source %> to <%= vehicle.destination %> | <strong>Departure:</strong> <%= vehicle.departureTime %></p>

<div class="row mb-4">
  <div class="col-md-6">
    <div class="card">
      <div class="card-header">
        <h5>Seat Status</h5>
      </div>
      <div class="card-body">
        <div class="seat-layout">
          <% for(let i = 0; i < vehicle.seats.length; i++) { %>
            <div class="seat <%= vehicle.seats[i].isBooked ? 'booked' : 'available' %>" data-seat="<%= vehicle.seats[i].seatNumber %>">
              <%= vehicle.seats[i].seatNumber %>
            </div>
          <% } %>
        </div>
        <div class="seat-legend mt-3">
          <span class="seat-indicator available"></span> Available
          <span class="seat-indicator booked ml-3"></span> Booked
        </div>

        <!-- new -->
        <div class="reset-booking">
          <button type="button" id="resetBooking" class="btn btn-primary" data-vehicle-id="<%= vehicle._id %>">
            Reset Bookings
          </button>
        </div>

      </div>
    </div>
  </div>
</div>

<h3>Booking Details</h3>

<% if (bookings.length === 0) { %>
  <div class="alert alert-info">No bookings found for this vehicle.</div>
<% } else { %>
  <div class="table-responsive">
    <table class="table table-striped">
      <thead>
        <tr>
          <th>Booking ID</th>
          <th>Seat Number</th>
          <th>Customer Name</th>
          <th>Customer Email</th>
          <th>Booking Date</th>
          
        </tr>
      </thead>
      <tbody>
        <% bookings.forEach(booking => { %>
          <tr>
            <td><%= booking.bookingId %></td>
            <td><%= booking.seatNumber %></td>
            <td><%= booking.customer.name %></td>
            <td><%= booking.customer.email %></td>
            <td><%= new Date(booking.bookingDate).toLocaleString() %></td>
            
          </tr>
        <% }) %>
      </tbody>
    </table>
  </div>
<% } %>

<%- include('../partials/footer') %>
